(()=>{"use strict";const e=(e,t)=>{const[a,n,s]=e.split("."),[i,r]=t.split(":");return new Date(`${s}-${n}-${a}T${i}:${r}:00`)};self.onmessage=t=>{const{action:a,data:n}=t.data;switch(a){case"SORT_AND_IDENTIFY_OVERLAPS":{const{meetings:t,numsOfLicence:s}=n,i=(t=>t.sort(((t,a)=>e(t.date,t.startTime).getTime()-e(a.date,a.startTime).getTime())))(t),r=(t=>{const a=Date.now();return t.flatMap((t=>{const n=e(t.date,t.startTime).getTime(),s=e(t.date,t.endTime).getTime();return s<a?[]:[{time:n,type:"start",meeting:t},{time:s,type:"end",meeting:t}]})).sort(((e,t)=>e.time-t.time||("start"===e.type?-1:1)))})(i);let o=0;const m=new Set,c=new Set;r.forEach((e=>{"start"===e.type?(m.add(e.meeting),o++,o>s&&m.forEach((e=>c.add(e)))):(m.delete(e.meeting),o--,o>=s&&m.forEach((e=>c.add(e))))})),self.postMessage({action:a,data:{sortedMeetings:i,overlappingMeetings:Array.from(c)}});break}default:return void console.error(`Unknown meeting action: ${a}`)}}})();